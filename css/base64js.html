<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Markdown Documentation</title>
        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/gh/limpdev/limpbin@main/css/GithubAPI.css"
        />
        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/gh/limpdev/limpbin@main/css/prism-hl.css"
        />
        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/gh/limpdev/limpbin@main/css/prism-add.css"
        />
    </head>
    <body>
        <script src="https://cdn.jsdelivr.net/gh/limpdev/limpbin@main/css/prism-hl.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/limpdev/limpbin@main/css/prism-add.js"></script>
        <article class="markdown-body">
            <h1>Convert <code>base64</code> w/ Javascript</h1>

            <blockquote>
                <p>
                    [!NOTE] Honestly, I straight up ripped this motherfucker from
                    <strong>cssportal</strong> -&gt; it&rsquo;s more than just the conversion logic
                    as it includes the logic for a drag n&rsquo;drop handler
                </p>
            </blockquote>

            <pre><code class="language-javascript">$(function() {

    var FileSelectHandler = function(e) {

        // When dropping; prevent browser from displaying the file
        FileDragHover(e);

        // Grab FileList object, from file upload input or from drop div
        var files = e.target.files || e.dataTransfer.files;

        if (files.length) {
            /*$('#droptarget').css('height', '100px');*/
            $('#result').html('');
            for (var i = 0, f; f = files[i]; i++) {
                ParseFile(files[i]);
            }
        }

        return false;
    };

    var FileDragHover = function(e) {
        e.stopPropagation();
        e.preventDefault();
        e.target.className = (e.type == 'dragover' ? 'hover' : '');
    }

    var ParseFile = function(file) {
        var reader = new FileReader();
        reader.readAsDataURL(file);
        (function(currentFile){
            reader.onload = function(e) {
                PrintFile(currentFile.name, currentFile.size, e.target.result.length, e.target.result);
            };
        }(file));
    };

    var PrintFile = function(name, oldSize, newSize, datauri) {
        $('#result').append(
			'&lt;div class=&quot;row&quot; style=&quot;margin-top:20px&quot;&gt;' +
			'&lt;div class=&quot;col-md-3&quot;&gt;' +
			'&lt;img class=&quot;img-fluid&quot; style=&quot;margin-top:5px&quot; src=&quot;' + datauri + '&quot;&gt;' +
			'&lt;/div&gt;' +
			'&lt;div class=&quot;col-md-9&quot;&gt;' +
			'&lt;p&gt;&lt;strong&gt;Filename: &lt;/strong&gt;' + name + '&lt;br&gt;' +
			'&lt;strong&gt;Old size: &lt;/strong&gt;' + Math.round(oldSize / 1024) + ' kb (' + oldSize + ' bytes)&lt;br&gt;' +
			'&lt;strong&gt;New size: &lt;/strong&gt;' + Math.round(newSize / 1024) + ' kb (' + newSize + ' bytes)&lt;/p&gt;' +
			'&lt;strong&gt;Data URI: &lt;i data-bs-toggle=&quot;tooltip&quot; data-bs-placement=&quot;top&quot; title=&quot;Copy&quot; data-clipboard-target=&quot;#uri&quot; class=&quot;clipboard copyIcon fa-clipboard&quot;&gt;&lt;/i&gt;&lt;/strong&gt;&lt;br&gt;&lt;textarea id=&quot;uri&quot; class=&quot;form-control&quot; rows=&quot;4&quot;&gt;' + datauri + '&lt;/textarea&gt;' +
			'&lt;br&gt;&lt;strong&gt;Image Tag: &lt;i data-bs-toggle=&quot;tooltip&quot; data-bs-placement=&quot;top&quot; title=&quot;Copy&quot; data-clipboard-target=&quot;#imagetag&quot; class=&quot;clipboard copyIcon fa-clipboard&quot;&gt;&lt;/i&gt;&lt;/strong&gt;&lt;br&gt;&lt;textarea id=&quot;imagetag&quot; class=&quot;form-control&quot; id=&quot;txtselect&quot; rows=&quot;4&quot;&gt;&lt;img alt=&quot;' + name + '&quot; src=&quot;' + datauri + '&quot;/&gt;&lt;/textarea&gt;' +
			'&lt;br&gt;&lt;strong&gt;CSS Background: &lt;i data-bs-toggle=&quot;tooltip&quot; data-bs-placement=&quot;top&quot; title=&quot;Copy&quot; data-clipboard-target=&quot;#cssback&quot; class=&quot;clipboard copyIcon fa-clipboard&quot;&gt;&lt;/i&gt;&lt;/strong&gt;&lt;br&gt;&lt;textarea id=&quot;cssback&quot; class=&quot;form-control&quot; rows=&quot;4&quot;&gt;background-image: url(&quot;' + datauri + '&quot;);&lt;/textarea&gt;' +
			'&lt;/div&gt;'
        );
        $('table input').bind('click', function() {
            $(this).select();
        });
		$('body').tooltip({
			selector: '.clipboard'
		});
    };

    // Bind file(s) selected
    document.getElementById('file').addEventListener('change', FileSelectHandler, false);

    // Bind drag-drop event
    var droptarget = document.getElementById('droptarget');
    droptarget.addEventListener('dragover', FileDragHover, false);
    droptarget.addEventListener('dragleave', FileDragHover, false);
    droptarget.addEventListener('drop', FileSelectHandler, false);

    $(&quot;#droptarget&quot;).on('click', function() {
       $(&quot;#file&quot;).click();
    });
});
</code></pre>
        </article>
    </body>
</html>
